<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–∞–π–º–µ—Ä –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            color: white;
            min-height: 100vh;
            padding: clamp(10px, 3vw, 20px);
            transition: padding 0.3s ease;
        }
        
        body.fullscreen { padding: 0; }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: clamp(20px, 4vw, 40px);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4), 
                        0 0 1px rgba(255, 255, 255, 0.1) inset;
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
        }
        
        body.fullscreen .container {
            max-width: 100%;
            height: 100vh;
            border-radius: 0;
            display: flex;
            flex-direction: column;
            padding: clamp(15px, 2vw, 25px);
        }
        
        .header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: clamp(15px, 3vw, 25px);
        }
        
        h1 {
            flex: 1;
            font-size: clamp(1.5rem, 4vw, 2.2rem);
            font-weight: 700;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-align: center;
        }
        
        .subtitle {
            text-align: center;
            color: #a0aec0;
            margin-bottom: clamp(20px, 4vw, 30px);
            font-size: clamp(0.85rem, 2vw, 1rem);
        }
        
        .fullscreen-btn {
            background: rgba(102, 126, 234, 0.2);
            border: 1px solid rgba(102, 126, 234, 0.3);
            color: #667eea;
            border-radius: 12px;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.3rem;
            transition: all 0.3s ease;
        }
        
        .fullscreen-btn:hover {
            background: rgba(102, 126, 234, 0.3);
            transform: scale(1.05);
        }
        
        .control-panel {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: clamp(15px, 3vw, 25px);
            margin-bottom: clamp(20px, 4vw, 30px);
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: clamp(10px, 2vw, 15px);
        }
        
        .control-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        label {
            font-size: 0.85rem;
            color: #a0aec0;
            font-weight: 500;
        }
        
        select, button {
            padding: 12px 16px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: inherit;
        }
        
        select {
            background: rgba(255, 255, 255, 0.05);
            color: white;
        }
        
        select:hover, select:focus {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(102, 126, 234, 0.5);
            outline: none;
        }
        
        .action-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 600;
            border: none;
            position: relative;
            overflow: hidden;
        }
        
        .action-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        .action-btn:hover::before {
            left: 100%;
        }
        
        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }
        
        .action-btn:disabled {
            background: rgba(255, 255, 255, 0.1);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .timer-display {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
            border: 2px solid rgba(102, 126, 234, 0.3);
            border-radius: 24px;
            padding: clamp(20px, 5vw, 40px);
            margin-bottom: clamp(20px, 4vw, 30px);
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .timer-display::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(102, 126, 234, 0.1) 0%, transparent 70%);
            animation: pulse 4s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }
        
        body.fullscreen .timer-display {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .time {
            font-size: clamp(3.5rem, 12vw, 6rem);
            font-weight: 800;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: clamp(10px, 2vw, 15px);
            position: relative;
            z-index: 1;
            letter-spacing: -0.02em;
        }
        
        .exercise-info {
            font-size: clamp(1.3rem, 3.5vw, 2rem);
            font-weight: 600;
            color: #e2e8f0;
            margin-bottom: clamp(8px, 2vw, 12px);
            min-height: clamp(40px, 8vw, 60px);
            position: relative;
            z-index: 1;
        }
        
        .phase-info {
            font-size: clamp(1rem, 2.5vw, 1.3rem);
            color: #cbd5e0;
            margin-bottom: 8px;
            position: relative;
            z-index: 1;
        }
        
        .circle-info {
            font-size: clamp(0.95rem, 2vw, 1.15rem);
            color: #a0aec0;
            position: relative;
            z-index: 1;
        }
        
        .exercise-details {
            margin-top: clamp(15px, 3vw, 25px);
            padding: clamp(12px, 2.5vw, 18px);
            background: rgba(0, 0, 0, 0.2);
            border-radius: 16px;
            border-left: 3px solid #667eea;
            position: relative;
            z-index: 1;
        }
        
        .next-exercise {
            font-size: clamp(1rem, 2.5vw, 1.25rem);
            color: #cbd5e0;
            margin-bottom: 10px;
            display: none;
        }
        
        .next-exercise.show { display: block; }
        
        .next-exercise span {
            font-weight: 600;
            color: #667eea;
        }
        
        .technique {
            font-size: clamp(0.85rem, 2vw, 1rem);
            color: #a0aec0;
            line-height: 1.5;
            font-style: italic;
        }
        
        .hint-toggle {
            background: rgba(102, 126, 234, 0.15);
            color: #667eea;
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 8px;
            padding: 8px 16px;
            font-size: 0.85rem;
            cursor: pointer;
            margin-top: 12px;
            transition: all 0.3s ease;
        }
        
        .hint-toggle:hover {
            background: rgba(102, 126, 234, 0.25);
        }
        
        .status {
            font-size: clamp(1.1rem, 2.5vw, 1.4rem);
            text-align: center;
            margin-top: clamp(15px, 3vw, 20px);
            min-height: 30px;
            font-weight: 500;
        }
        
        .workout-list {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 20px;
            padding: clamp(15px, 3vw, 25px);
            margin-top: clamp(20px, 4vw, 30px);
        }
        
        body.fullscreen .workout-list { display: none; }
        
        .workout-list h3 {
            color: #cbd5e0;
            margin-bottom: 15px;
            font-size: clamp(1.1rem, 2.5vw, 1.3rem);
            font-weight: 600;
        }
        
        .exercise-item {
            padding: 12px 16px;
            margin: 8px 0;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 1px solid transparent;
            font-size: clamp(0.9rem, 2vw, 1rem);
        }
        
        .exercise-item:hover {
            background: rgba(255, 255, 255, 0.06);
            border-color: rgba(102, 126, 234, 0.3);
            transform: translateX(4px);
        }
        
        .exercise-item.active {
            background: rgba(102, 126, 234, 0.2);
            border-color: #667eea;
            transform: translateX(8px);
        }
        
        .exercise-item.completed {
            opacity: 0.5;
            color: #718096;
        }
        
        .volume-control {
            display: flex;
            align-items: center;
            gap: 10px;
            grid-column: 1 / -1;
        }
        
        .volume-control input {
            flex: 1;
            height: 6px;
            border-radius: 3px;
            background: rgba(255, 255, 255, 0.1);
            outline: none;
            -webkit-appearance: none;
        }
        
        .volume-control input::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
        }
        
        .keep-alive-info {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            padding: 10px 16px;
            border-radius: 12px;
            font-size: 0.85rem;
            display: none;
            z-index: 1000;
            border: 1px solid rgba(102, 126, 234, 0.3);
            color: #cbd5e0;
        }
        
        .keep-alive-info.active { display: block; }
        .keep-alive-info.wakelock { border-color: #48bb78; color: #68d391; }
        
        @media (max-width: 768px) {
            .control-panel {
                grid-template-columns: 1fr;
            }
            
            .volume-control {
                grid-column: 1;
            }
        }
        
        @media (max-height: 700px) and (orientation: landscape) {
            body.fullscreen .container {
                padding: 15px;
            }
            
            body.fullscreen .timer-display {
                padding: 15px;
            }
            
            .exercise-details {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="keep-alive-info" id="keepAliveInfo">üîã –≠–∫—Ä–∞–Ω –∞–∫—Ç–∏–≤–µ–Ω</div>
    <div class="container">
        <div class="header">
            <h1>üî• –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ñ–∏—Ä–æ—Å–∂–∏–≥–∞—Ç–µ–ª—å</h1>
            <button class="fullscreen-btn" id="fullscreenBtn" title="–ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º">‚õ∂</button>
        </div>
        <div class="subtitle">–¢–∞–π–º–µ—Ä —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ —Å –≥–æ–ª–æ—Å–æ–≤—ã–º–∏ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è–º–∏</div>
        <div class="control-panel">
            <div class="control-group">
                <label for="programSelect">–ü—Ä–æ–≥—Ä–∞–º–º–∞:</label>
                <select id="programSelect">
                    <option value="">–ó–∞–≥—Ä—É–∑–∏—Ç—å...</option>
                </select>
            </div>
            <div class="control-group">
                <button class="action-btn" id="loadProgramBtn">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
            </div>
            <div class="control-group">
                <label for="circles">–ö—Ä—É–≥–æ–≤:</label>
                <select id="circles">
                    <option value="3">3 –∫—Ä—É–≥–∞</option><option value="4">4 –∫—Ä—É–≥–∞</option>
                    <option value="5" selected>5 –∫—Ä—É–≥–æ–≤</option><option value="6">6 –∫—Ä—É–≥–æ–≤</option>
                    <option value="7">7 –∫—Ä—É–≥–æ–≤</option><option value="8">8 –∫—Ä—É–≥–æ–≤</option>
                    <option value="9">9 –∫—Ä—É–≥–æ–≤</option>
                </select>
            </div>
            <button class="action-btn" id="startBtn">‚ñ∂ –°—Ç–∞—Ä—Ç</button>
            <button class="action-btn" id="pauseBtn" disabled>‚è∏ –ü–∞—É–∑–∞</button>
            <button class="action-btn" id="resetBtn">üîÑ –°–±—Ä–æ—Å</button>
            <div class="volume-control">
                <span>üîä</span><input type="range" id="volume" min="0" max="1" step="0.1" value="1">
                <span id="volumeValue">100%</span>
            </div>
        </div>
        <div class="timer-display">
            <div class="time" id="timer">45</div>
            <div class="exercise-info" id="exerciseName">–î–∂–∞–º–ø –¥–∂–µ–∫</div>
            <div class="phase-info" id="phase">–†–∞–±–æ—Ç–∞</div>
            <div class="circle-info" id="circleInfo">–ö—Ä—É–≥: 1/5</div>
            
            <div class="exercise-details">
                <div class="next-exercise" id="nextExercise">
                    –î–∞–ª–µ–µ: <span id="nextExerciseName">–ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏—è</span>
                </div>
                <div class="technique" id="technique">
                    –ü—Ä—ã–∂–∫–∏ —Å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º —Ä–∞–∑–≤–µ–¥–µ–Ω–∏–µ–º —Ä—É–∫ –∏ –Ω–æ–≥. –î–µ—Ä–∂–∏—Ç–µ —Å–ø–∏–Ω—É –ø—Ä—è–º–æ–π.
                </div>
                <button class="hint-toggle" id="hintToggle">–û–∑–≤—É—á–∏—Ç—å —Ç–µ—Ö–Ω–∏–∫—É</button>
            </div>
        </div>
        <div class="status" id="status">–ì–æ—Ç–æ–≤ –∫ –Ω–∞—á–∞–ª—É —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</div>
        <div class="workout-list">
            <h3>–£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –≤ –∫—Ä—É–≥–µ:</h3>
            <div id="exercisesList"></div>
        </div>
    </div>

    <script>
        let exercises = [
    {
        name: "–ë—ã—Å—Ç—Ä—ã–π –±–µ–≥ –Ω–∞ –º–µ—Å—Ç–µ —Å –∑–∞—Ö–ª—ë—Å—Ç–æ–º –≥–æ–ª–µ–Ω–∏ (High Knees + Heel Kicks)",
        technique: "–í—Å—Ç–∞–Ω—å—Ç–µ –ø—Ä—è–º–æ, –Ω–æ–≥–∏ –Ω–∞ —à–∏—Ä–∏–Ω–µ –ø–ª–µ—á. –ë–µ–≥–∏—Ç–µ –Ω–∞ –º–µ—Å—Ç–µ, –ø–æ–ø–µ—Ä–µ–º–µ–Ω–Ω–æ –≤—ã—Å–æ–∫–æ –ø–æ–¥–Ω–∏–º–∞—è –∫–æ–ª–µ–Ω–∏ (–¥–æ —É—Ä–æ–≤–Ω—è —Ç–∞–∑–∞ –∏–ª–∏ –≤—ã—à–µ) –∏ –∑–∞—Ç–µ–º —É–¥–∞—Ä—è—è –ø—è—Ç–∫–∞–º–∏ –ø–æ —è–≥–æ–¥–∏—Ü–∞–º. –î–µ—Ä–∂–∏—Ç–µ –∫–æ—Ä–ø—É—Å –ø—Ä—è–º–æ, —Ä–∞–±–æ—Ç–∞–π—Ç–µ —Ä—É–∫–∞–º–∏ –∫–∞–∫ –ø—Ä–∏ –±–µ–≥–µ. –°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –≤—ã—Å–æ–∫–∏–π —Ç–µ–º–ø, —Å—Ç–∞—Ä–∞–π—Ç–µ—Å—å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ —Å–¥–≤–∏–≥–∞—Ç—å—Å—è —Å –º–µ—Å—Ç–∞."
    },
    {
        name: "–ë–æ–∫–æ–≤–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Ä—É–∫–∞–º–∏ –ø–æ –ø–µ—Ä–µ–∫–ª–∞–¥–∏–Ω–µ",
        technique: "–ü–æ–≤–∏—Å–Ω–∏—Ç–µ –Ω–∞ –ø–µ—Ä–µ–∫–ª–∞–¥–∏–Ω–µ –ø—Ä—è–º—ã–º —Ö–≤–∞—Ç–æ–º (–ª–∞–¥–æ–Ω–∏ –æ—Ç —Å–µ–±—è). –ù–æ–≥–∏ –º–æ–∂–Ω–æ —Å–ª–µ–≥–∫–∞ —Å–æ–≥–Ω—É—Ç—å –∏–ª–∏ —Å–∫—Ä–µ—Å—Ç–∏—Ç—å –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏. –ü–µ—Ä–µ–º–µ—â–∞–π—Ç–µ—Å—å –≤–±–æ–∫, –ø–æ–æ—á–µ—Ä–µ–¥–Ω–æ –æ—Ç–ø—É—Å–∫–∞—è –æ–¥–Ω—É —Ä—É–∫—É –∏ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—è –µ–µ –¥–∞–ª—å—à–µ –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é –¥–≤–∏–∂–µ–Ω–∏—è, –∑–∞—Ç–µ–º –ø–æ–¥—Ç—è–≥–∏–≤–∞—è –≤—Ç–æ—Ä—É—é —Ä—É–∫—É. –î–≤–∏–≥–∞–π—Ç–µ—Å—å –ø–ª–∞–≤–Ω–æ, –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—è –∫–∞–∂–¥—ã–π –ø–µ—Ä–µ—Ö–≤–∞—Ç. –ú–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –≤ –æ–±–µ —Å—Ç–æ—Ä–æ–Ω—ã."
    },
    {
        name: "–ë—ë—Ä–ø–∏",
        technique: "1. –ò–∑ –ø–æ–ª–æ–∂–µ–Ω–∏—è —Å—Ç–æ—è –ø—Ä–∏—Å—è–¥—å—Ç–µ, —É–ø—Ä–∏—Ç–µ—Å—å –ª–∞–¥–æ–Ω—è–º–∏ –≤ –ø–æ–ª. 2. –ü—Ä—ã–∂–∫–æ–º –æ—Ç–±—Ä–æ—Å—å—Ç–µ –Ω–æ–≥–∏ –Ω–∞–∑–∞–¥ –≤ –ø–ª–∞–Ω–∫—É. 3. –°–¥–µ–ª–∞–π—Ç–µ –æ—Ç–∂–∏–º–∞–Ω–∏–µ (–ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏). 4. –ü—Ä—ã–∂–∫–æ–º –ø–æ–¥—Ç—è–Ω–∏—Ç–µ –Ω–æ–≥–∏ –∫ —Ä—É–∫–∞–º. 5. –í—ã–ø—Ä—ã–≥–Ω–∏—Ç–µ –≤–≤–µ—Ä—Ö —Å —Ö–ª–æ–ø–∫–æ–º –Ω–∞–¥ –≥–æ–ª–æ–≤–æ–π."
    },
    {
        name: "–û—Ç–∂–∏–º–∞–Ω–∏—è —Å –Ω–æ–≥–∞–º–∏ –Ω–∞ –≤–æ–∑–≤—ã—à–µ–Ω–∏–∏ (Raised-Leg Pushups)",
        technique: "–ü—Ä–∏–º–∏—Ç–µ —É–ø–æ—Ä –ª—ë–∂–∞, –ø–æ—Å—Ç–∞–≤–∏–≤ –Ω–æ–≥–∏ –Ω–∞ –≤–æ–∑–≤—ã—à–µ–Ω–∏–µ (—Å–∫–∞–º—å—é, –ø–ª–∞—Ç—Ñ–æ—Ä–º—É, –º—è—á). –†—É–∫–∏ –Ω–∞ –ø–æ–ª—É –ø–æ–¥ –ø–ª–µ—á–∞–º–∏. –¢–µ–ª–æ –æ–±—Ä–∞–∑—É–µ—Ç –ø—Ä—è–º—É—é –ª–∏–Ω–∏—é –æ—Ç –≥–æ–ª–æ–≤—ã –¥–æ –ø—è—Ç, —Ç–∞–∑ –Ω–µ –ø—Ä–æ–≤–∏—Å–∞–µ—Ç. –ù–∞ –≤–¥–æ—Ö–µ —Å–æ–≥–Ω–∏—Ç–µ –ª–æ–∫—Ç–∏, –æ–ø—É—Å–∫–∞—è –≥—Ä—É–¥—å –∫ –ø–æ–ª—É. –õ–æ–∫—Ç–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞–∑–∞–¥ –ø–æ–¥ —É–≥–ª–æ–º 45-60¬∞. –ù–∞ –≤—ã–¥–æ—Ö–µ –º–æ—â–Ω–æ –æ—Ç–æ–∂–º–∏—Ç–µ—Å—å –≤ –∏—Å—Ö–æ–¥–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ. –£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ —Å–º–µ—â–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –≤–µ—Ä—Ö –≥—Ä—É–¥–∏ –∏ –ø–ª–µ—á–∏."
    },
    {
        name: "–ü—Ä–∏—Å–µ–¥–∞–Ω–∏—è —Å –≤—ã–ø—Ä—ã–≥–∏–≤–∞–Ω–∏–µ–º –∏ –ø–∞—É–∑–æ–π (Jumping Squats + Pause)",
        technique: "–ü–æ—Å—Ç–∞–≤—å—Ç–µ –Ω–æ–≥–∏ –Ω–∞ —à–∏—Ä–∏–Ω–µ –ø–ª–µ—á. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –≥–ª—É–±–æ–∫–∏–π –ø—Ä–∏—Å–µ–¥, –æ—Ç–≤–æ–¥—è —Ç–∞–∑ –Ω–∞–∑–∞–¥ –∏ —Å–≥–∏–±–∞—è –∫–æ–ª–µ–Ω–∏ –¥–æ –ø–∞—Ä–∞–ª–ª–µ–ª–∏ –±–µ–¥–µ—Ä —Å –ø–æ–ª–æ–º –∏–ª–∏ –Ω–∏–∂–µ. –í –Ω–∏–∂–Ω–µ–π —Ç–æ—á–∫–µ –∑–∞–º—Ä–∏—Ç–µ –Ω–∞ 1-2 —Å–µ–∫—É–Ω–¥—ã (–ø–∞—É–∑–∞). –ó–∞—Ç–µ–º –∏–∑ —ç—Ç–æ–≥–æ —Å—Ç–∞—Ç–∏—á–Ω–æ–≥–æ –ø–æ–ª–æ–∂–µ–Ω–∏—è –º–æ—â–Ω–æ –≤—ã–ø—Ä—ã–≥–Ω–∏—Ç–µ –≤–≤–µ—Ä—Ö, –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤—ã–ø—Ä—è–º–ª—è—è –Ω–æ–≥–∏ –∏ –æ—Ç—Ä—ã–≤–∞—è—Å—å –æ—Ç –ø–æ–ª–∞. –ú—è–≥–∫–æ –ø—Ä–∏–∑–µ–º–ª–∏—Ç–µ—Å—å –Ω–∞ —Å–ª–µ–≥–∫–∞ —Å–æ–≥–Ω—É—Ç—ã–µ –Ω–æ–≥–∏ –∏ —Å—Ä–∞–∑—É —É—Ö–æ–¥–∏—Ç–µ –≤ —Å–ª–µ–¥—É—é—â–∏–π –ø—Ä–∏—Å–µ–¥ —Å –ø–∞—É–∑–æ–π."
    },
    {
        name: "–ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏—è",
        technique: "–î–ª—è –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏—Ö: –≤–æ–∑—å–º–∏—Ç–µ—Å—å –∑–∞ –ø–µ—Ä–µ–∫–ª–∞–¥–∏–Ω—É —Ö–≤–∞—Ç–æ–º —à–∏—Ä–µ –ø–ª–µ—á. –ù–∞ –≤—ã–¥–æ—Ö–µ –ø–æ–¥—Ç—è–Ω–∏—Ç–µ—Å—å, —á—Ç–æ–±—ã –ø–æ–¥–±–æ—Ä–æ–¥–æ–∫ –æ–∫–∞–∑–∞–ª—Å—è –Ω–∞–¥ –ø–µ—Ä–µ–∫–ª–∞–¥–∏–Ω–æ–π. –ù–∞ –≤–¥–æ—Ö–µ –º–µ–¥–ª–µ–Ω–Ω–æ –æ–ø—É—Å—Ç–∏—Ç–µ—Å—å. –î–ª—è –∞–≤—Å—Ç—Ä–∞–ª–∏–π—Å–∫–∏—Ö: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∏–∑–∫—É—é –ø–µ—Ä–µ–∫–ª–∞–¥–∏–Ω—É, —Ç–µ–ª–æ –ø–æ–¥ —É–≥–ª–æ–º, –ø–æ–¥—Ç—è–≥–∏–≤–∞–π—Ç–µ –≥—Ä—É–¥—å –∫ –ø–µ—Ä–µ–∫–ª–∞–¥–∏–Ω–µ."
    },
    {
        name: "–†—É—Å—Å–∫–∏–µ —Å–∫—Ä—É—á–∏–≤–∞–Ω–∏—è —Å –ø–µ—Ä–µ–Ω–æ—Å–æ–º –Ω–æ–≥ —á–µ—Ä–µ–∑ –º—è—á",
        technique: "–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ –Ω–∞ –º—ã—à—Ü—ã –∫–æ—Ä–∞ —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º."
    },
    {
        name: "–õ—É–Ω–æ—Ö–æ–¥",
        technique: "–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ–≥–æ —Ç–µ–ª–∞."
    },
    {
        name: "–ë–æ–∫–æ–≤—ã–µ –≤—ã–ø–∞–¥—ã —Å —É–¥–µ—Ä–∂–∞–Ω–∏–µ–º (Lateral Lunges + Hold)",
        technique: "–í—Å—Ç–∞–Ω—å—Ç–µ –ø—Ä—è–º–æ, –Ω–æ–≥–∏ –≤–º–µ—Å—Ç–µ –∏–ª–∏ –Ω–∞ —à–∏—Ä–∏–Ω–µ –ø–ª–µ—á. –°–¥–µ–ª–∞–π—Ç–µ —à–∏—Ä–æ–∫–∏–π —à–∞–≥ –≤–ø—Ä–∞–≤–æ, –ø–µ—Ä–µ–Ω–æ—Å—è –≤–µ—Å —Ç–µ–ª–∞ –Ω–∞ –ø—Ä–∞–≤—É—é –Ω–æ–≥—É –∏ —Å–≥–∏–±–∞—è –µ–µ –≤ –∫–æ–ª–µ–Ω–µ. –û—Ç–≤–µ–¥–∏—Ç–µ —Ç–∞–∑ –Ω–∞–∑–∞–¥, –¥–µ—Ä–∂–∞ –ª–µ–≤—É—é –Ω–æ–≥—É –ø—Ä—è–º–æ–π. –û–ø—É—Å—Ç–∏—Ç–µ—Å—å –¥–æ –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–π –≥–ª—É–±–∏–Ω—ã (–±–µ–¥—Ä–æ –ø—Ä–∞–≤–æ–π –Ω–æ–≥–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –ø–æ–ª—É –∏–ª–∏ –≤—ã—à–µ). –ó–∞–¥–µ—Ä–∂–∏—Ç–µ—Å—å –≤ —ç—Ç–æ–π –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞ 2-3 —Å–µ–∫—É–Ω–¥—ã (—É–¥–µ—Ä–∂–∞–Ω–∏–µ). –ó–∞—Ç–µ–º –æ—Ç—Ç–æ–ª–∫–Ω–∏—Ç–µ—Å—å –ø—Ä–∞–≤–æ–π –Ω–æ–≥–æ–π –∏ –≤–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ –∏—Å—Ö–æ–¥–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –≤ –¥—Ä—É–≥—É—é —Å—Ç–æ—Ä–æ–Ω—É. –°–ª–µ–¥–∏—Ç–µ, —á—Ç–æ–±—ã –∫–æ–ª–µ–Ω–æ –æ–ø–æ—Ä–Ω–æ–π –Ω–æ–≥–∏ –Ω–µ –≤—ã—Ö–æ–¥–∏–ª–æ –∑–∞ –Ω–æ—Å–æ–∫."
    },
    {
        name: "–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –ø–ª–∞–Ω–∫–∞: –ø–µ—Ä–µ—Ö–æ–¥ –≤ –±–æ–∫–æ–≤—É—é –ø–ª–∞–Ω–∫—É —Å –ø–æ–¥—ä—ë–º–æ–º –±–µ–¥—Ä–∞ (Side Plank + Hip Lift)",
        technique: "–ù–∞—á–Ω–∏—Ç–µ —Å –ø–ª–∞–Ω–∫–∏ –Ω–∞ –ø—Ä—è–º—ã—Ö —Ä—É–∫–∞—Ö. –†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –∫–æ—Ä–ø—É—Å –≤–ø—Ä–∞–≤–æ, –ø–æ–¥–Ω–∏–º–∞—è –ø—Ä–∞–≤—É—é —Ä—É–∫—É –≤–≤–µ—Ä—Ö –∏ —Å—Ç–∞–≤—è —Å—Ç–æ–ø—ã –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–∞ –∏–ª–∏ –æ–¥–Ω—É –ø–µ—Ä–µ–¥ –¥—Ä—É–≥–æ–π, –ø—Ä–∏–Ω–∏–º–∞—è –±–æ–∫–æ–≤—É—é –ø–ª–∞–Ω–∫—É. –í –≤–µ—Ä—Ö–Ω–µ–π —Ç–æ—á–∫–µ –∑–∞–¥–µ—Ä–∂–∏—Ç–µ—Å—å, –∑–∞—Ç–µ–º –æ–ø—É—Å—Ç–∏—Ç–µ –±–µ–¥—Ä–∞ –≤–Ω–∏–∑, –ø–æ—á—Ç–∏ –∫–∞—Å–∞—è—Å—å –ø–æ–ª–∞, –∏ —Å–Ω–æ–≤–∞ –ø–æ–¥–Ω–∏–º–∏—Ç–µ –∏—Ö. –í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ –æ–±—ã—á–Ω—É—é –ø–ª–∞–Ω–∫—É –Ω–∞ –ø—Ä—è–º—ã—Ö —Ä—É–∫–∞—Ö –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –≤ –ª–µ–≤—É—é —Å—Ç–æ—Ä–æ–Ω—É. –î–µ—Ä–∂–∏—Ç–µ –ø—Ä–µ—Å—Å –∏ —è–≥–æ–¥–∏—Ü—ã –≤ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–∏, —Ç–µ–ª–æ –æ–±—Ä–∞–∑—É–µ—Ç –ø—Ä—è–º—É—é –ª–∏–Ω–∏—é."
    }
];

        let workoutConfig = {
            workTime: 45, restTime: 15, circleRestTime: 60, countdownTime: 5
        };

        let currentTime = workoutConfig.workTime;
        let isRunning = false, isPaused = false;
        let currentPhase = 'work';
        let currentExerciseIndex = 0, currentCircle = 1, totalCircles = 5;
        let timerInterval = null, countdownActive = false, speechVolume = 1;
        let isFullscreen = false, wakeLock = null, mouseKeepAliveInterval = null;
        let speakTechnique = true;
        const wakeLockSupported = 'wakeLock' in navigator;

        const timerElement = document.getElementById('timer');
        const exerciseNameElement = document.getElementById('exerciseName');
        const phaseElement = document.getElementById('phase');
        const circleInfoElement = document.getElementById('circleInfo');
        const statusElement = document.getElementById('status');
        const startBtn = document.getElementById('startBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const resetBtn = document.getElementById('resetBtn');
        const circlesSelect = document.getElementById('circles');
        const exercisesListElement = document.getElementById('exercisesList');
        const volumeSlider = document.getElementById('volume');
        const volumeValue = document.getElementById('volumeValue');
        const fullscreenBtn = document.getElementById('fullscreenBtn');
        const keepAliveInfo = document.getElementById('keepAliveInfo');
        const nextExerciseElement = document.getElementById('nextExercise');
        const nextExerciseNameElement = document.getElementById('nextExerciseName');
        const techniqueElement = document.getElementById('technique');
        const hintToggleBtn = document.getElementById('hintToggle');

        const catalogUrl = 'https://raw.githubusercontent.com/CAMOPKAH/SportTrainDeepTabata/main/workouts/index.json';

        function updateExerciseDetails() {
            exerciseNameElement.textContent = exercises[currentExerciseIndex].name;
            techniqueElement.textContent = exercises[currentExerciseIndex].technique;
            
            let nextIndex = currentExerciseIndex + 1;
            let nextCircle = currentCircle;
            
            if (nextIndex >= exercises.length) {
                nextIndex = 0;
                nextCircle = currentCircle + 1;
            }
            
            if (nextCircle <= totalCircles) {
                nextExerciseNameElement.textContent = exercises[nextIndex].name;
            } else {
                nextExerciseNameElement.textContent = "–ö–æ–Ω–µ—Ü —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏";
            }
            
            if (currentPhase === 'rest' || currentPhase === 'circleRest') {
                nextExerciseElement.classList.add('show');
            } else {
                nextExerciseElement.classList.remove('show');
            }
            
            updateActiveExercise();
        }
        
        function toggleTechniqueVoice() {
            speakTechnique = !speakTechnique;
            hintToggleBtn.textContent = speakTechnique ? 
                "–û–∑–≤—É—á–∏—Ç—å —Ç–µ—Ö–Ω–∏–∫—É ‚úì" : "–û–∑–≤—É—á–∏—Ç—å —Ç–µ—Ö–Ω–∏–∫—É";
            localStorage.setItem('speakTechnique', speakTechnique);
        }
        
        function speakExerciseWithTechnique() {
            const exercise = exercises[currentExerciseIndex];
            let textToSpeak = `–ù–∞—á–∏–Ω–∞–µ–º ${exercise.name}`;
            
            if (speakTechnique) {
                textToSpeak += `. ${exercise.technique}`;
            }
            
            speak(textToSpeak);
        }

        function startMouseMoveKeepAlive() {
            if (mouseKeepAliveInterval) return;
            
            mouseKeepAliveInterval = setInterval(() => {
                const x = Math.floor(Math.random() * 3);
                const y = Math.floor(Math.random() * 3);
                
                window.dispatchEvent(new MouseEvent('mousemove', {
                    view: window,
                    bubbles: true,
                    cancelable: true,
                    clientX: x,
                    clientY: y
                }));
            }, 10000);
            
            keepAliveInfo.textContent = 'üîã –≠–∫—Ä–∞–Ω –∞–∫—Ç–∏–≤–µ–Ω (–ú—ã—à—å)';
            keepAliveInfo.classList.remove('wakelock');
            keepAliveInfo.classList.add('active');
        }

        function stopMouseMoveKeepAlive() {
            if (mouseKeepAliveInterval) {
                clearInterval(mouseKeepAliveInterval);
                mouseKeepAliveInterval = null;
                keepAliveInfo.classList.remove('active');
            }
        }

        async function requestWakeLock() {
            const isSecureContext = window.isSecureContext || 
                                   window.location.protocol === 'https:' || 
                                   window.location.hostname === 'localhost' ||
                                   window.location.hostname === '127.0.0.1';
            
            if (wakeLockSupported && isSecureContext) {
                try {
                    if (wakeLock !== null) return;
                    
                    wakeLock = await navigator.wakeLock.request('screen');
                    keepAliveInfo.textContent = 'üîã –≠–∫—Ä–∞–Ω –∞–∫—Ç–∏–≤–µ–Ω (Wake Lock)';
                    keepAliveInfo.classList.add('active', 'wakelock');
                    
                    wakeLock.addEventListener('release', () => {
                        keepAliveInfo.classList.remove('active');
                        wakeLock = null;
                        
                        if (isRunning && !isPaused) {
                            startMouseMoveKeepAlive();
                        }
                    });
                    
                    return;
                } catch (err) {
                    console.error('–û—à–∏–±–∫–∞ Wake Lock:', err);
                }
            }
            
            startMouseMoveKeepAlive();
        }

        async function releaseKeepAlive() {
            stopMouseMoveKeepAlive();
            
            if (wakeLock !== null) {
                try {
                    await wakeLock.release();
                    wakeLock = null;
                } catch (err) {
                    console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–∏ Wake Lock:', err);
                }
            }
            
            keepAliveInfo.classList.remove('active');
        }

        async function startWorkout() {
            if (isRunning) return;
            
            isRunning = true;
            isPaused = false;
            startBtn.disabled = true;
            pauseBtn.disabled = false;
            statusElement.textContent = '–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –Ω–∞—á–∞–ª–∞—Å—å!';
            statusElement.style.color = '#68d391
